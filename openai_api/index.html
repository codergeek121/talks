<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/black.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h2>Unleashing the Power of Language:</h2>
          <h3>An Introduction to the OpenAI API</h3>

          <aside class="notes">
          </aside>
        </section>

        <section>
          <img data-src="chatgpt_15_minutes.png">
          <aside class="notes">
          </aside>
        </section>

        <section>
          <a href="https://platform.openai.com/docs/api-reference/chat">Completions API</a>
          <aside class="notes">
          </aside>
        </section>

        <section>
            <pre><code data-trim data-noescape data-line-numbers="1-3">
            client = OpenAI::Client.new(
              access_token: Rails.application.credentials.openai_key
            )
            client.chat(
              parameters: {
                model: "gpt-3.5-turbo-0613",
                messages: [
                  {
                    role: "system",
                    content: "You are a professional SEO consultant"
                  },
                  {
                    role: "user",
                    content: "How can I rank my website on Google?",
                  },
                ],
              }
            )
            </code></pre>
          <aside class="notes">
          </aside>
        </section>
      
        <section>
            <pre><code data-trim data-noescape data-line-numbers="6">
            client = OpenAI::Client.new(
              access_token: Rails.application.credentials.openai_key
            )
            client.chat(
              parameters: {
                model: "gpt-3.5-turbo-0613",
                messages: [
                  {
                    role: 'system',
                    content: "You are a professional SEO consultant"
                  },
                  {
                    role: "user",
                    content: "How can I rank my website on Google?",
                  },
                ],
              }
            )
            </code></pre>
          <aside class="notes">
          </aside>
        </section>

        <section>
            <pre><code data-trim data-noescape data-line-numbers="8-11">
            client = OpenAI::Client.new(
              access_token: Rails.application.credentials.openai_key
            )
            client.chat(
              parameters: {
                model: "gpt-3.5-turbo-0613",
                messages: [
                  {
                    role: 'system',
                    content: "You are a professional SEO consultant"
                  },
                  {
                    role: "user",
                    content: "How can I rank my website on Google?",
                  },
                ],
              }
            )
            </code></pre>
          <aside class="notes">
          </aside>
        </section>


        <section>
            <pre><code data-trim data-noescape data-line-numbers="12-15">
            client = OpenAI::Client.new(
              access_token: Rails.application.credentials.openai_key
            )
            api_response = client.chat(
              parameters: {
                model: "gpt-3.5-turbo-0613",
                messages: [
                  {
                    role: 'system',
                    content: "You are a professional SEO consultant"
                  },
                  {
                    role: "user",
                    content: "How can I rank my website on Google?",
                  },
                ],
              }
            )
            </code></pre>
          <aside class="notes">
          </aside>
        </section>

        <section>
            <pre><code class="ruby" data-trim data-noescape>
              api_response.dig("choices", 0, "message")

              # long response string
              "Here are some seo recommendations...."
            </code></pre>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <p>"Can you summarize https://rubyonrails.org?"</p>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <h2>ðŸ˜¢</h2>
            <p>"I apologize, but I am an AI language model and I am not able to browse the internet or access specific websites. Therefore, I cannot provide a summary or description of the website rubyonrails.org"</p>
            <aside class="notes">
            </aside>
        </section>

        <section>
          <a href="https://platform.openai.com/docs/api-reference/chat/create#chat/create-function_call">Function Calling</a> 
          <aside class="notes">
           </aside>
        </section>

        <section>
          <p>Define a function call</p>
          <pre><code class="ruby" data-trim data-noescape data-line-numbers="5-18">
          api_response = client.chat(
            parameters: {
              model: "gpt-3.5-turbo-0613",
              messages: [ ... ],
              functions: [{
                name: "get_webpage_content",
                description: "Gets the content of a webpage",
                parameters: {
                  type: :object,
                  properties: {
                    url: {
                      type: :string,
                      description: "The webpage's url",
                    },
                  },
                  required: ["url"],
                }
              }]
            }
          )
          </code></pre>
          <aside class="notes">
           </aside>
        </section>

        <section>
          <p>Example</p>
          <pre><code class="ruby" data-trim data-noescape>
            /**
             * Gets the content of a webpage
             */
            get_webpage_content({ url: "https://www.example.com" })
          </code></pre>
          <aside class="notes">
           </aside>
        </section>

        <section>
          <p>Pass function along with messages</p>
          <pre><code class="ruby" data-trim data-noescape>
          api_response = client.chat(
            parameters: {
              model: "gpt-3.5-turbo-0613",
              messages: [
                {
                  role: "user",
                  content: "Can you summarize rubyonrails.org?",
                },
              ],
              functions: [ ... ],
            }
          )
          </code></pre>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <p>Crawl the webpage</p>
          <pre><code class="ruby" data-trim data-noescape>
            message = api_response.dig("choices", 0, "message")

            # "get_webpage_content"
            function_name = response.dig("function_call", "name")

            if function_name == "get_webpage_content"
              # { url: "https://rubyonrails.org" }
              kwargs = JSON.parse(message.dig("function_call", "arguments"))
              @result = WebsiteCrawler.crawl(**kwargs)
            end
          </code></pre>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <p>Pass the crawl result back to the API</p>
          <pre><code class="ruby" data-trim data-noescape>
            client.chat(
              parameters: {
                model: "gpt-3.5-turbo-0613",
                functions: [ ... ]
                messages: [
                  {
                    role: "user",
                    content: "Can you summarize https://rubyonrails.org?",
                  },
                  {
                    role: "function",
                    name: "get_webpage_content",
                    content: @result
                  }
                ],
              }
            )
          </code></pre>
          <aside class="notes">
          </aside>
        </section>


        <section>
          <h2>ðŸ¥³</h2>
          <p>"The content of https://rubyonrails.org ist about the framework Ruby on Rails. It was ..."</p>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <p>Questions?</p>
          <aside class="notes">
          </aside>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
      });
    </script>
  </body>
</html>
